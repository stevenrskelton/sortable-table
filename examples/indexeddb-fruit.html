<!DOCTYPE html>
<html>
<head>
	<title>Sortable Table using Polymer Web Components</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<script src="../../platform/platform.js" debug log="bind,ready,events"></script>
	<link rel="import" href="../../polymer/polymer.html">
	<link rel="import" href="indexeddb/indexeddb-fruit.html">
	<link rel="import" href="json-stringify.html">
	<style>
		.paramType { color: #ddd }
	</style>
</head>
<body unresolved>

	<h1>IndexedDB</h1>

	The is a sample implementation using only HTML5 <a href="http://www.w3.org/TR/IndexedDB/" target="_blank" alt="IndexedDB on W3C">
	IndexedDB</a>, a full implementation would require a secondary method to load the initial DB on each user's browser.

	<p>

	<hr style="width:75%;height:1px;border:none;color:#DDD;background-color:#DDD;" align="left">

	<h2>Basic Use</h2>

	<pre>
	<strong>&lt;indexeddb-fruit</strong>
		start=<span class="paramType">[int]</span>
		length=<span class="paramType">[int]</span>
		sortColumn=<span class="paramType">[string]</span>
		sortDescending=<span class="paramType">[boolean]</span>
		columns='[
			{"name":"name"},
			{"name":"energy"},
			{"name":"protein"},
			{"name":"fat"},
			{"name":"carbohydrates"}
		]'
	<strong>&gt;&lt;/indexeddb-fruit&gt;</strong>
	</pre>

	<hr style="width:75%;height:1px;border:none;color:#DDD;background-color:#DDD;" align="left">

	<p>

	<h2>Demo</h2>

	<p>

	<template is="auto-binding">
		<table>
			<tr>
				<td>Start</td>
				<td><input type="number" min="0" max="47" value="{{start}}" style="text-align:right"></td>
				<td><input type="range" min="0" max="47" value="{{start}}"></td>
				<td>Paging first record indicator. This is the start point in the current data set (0 index based - i.e. 0 is the first record).</td>
			</tr>
			<tr>
				<td>Length</td>
				<td><input type="number" min="-1" max="47" value="{{length}}" style="text-align:right"></td>
				<td><input type="range" min="-1" max="47" value="{{length}}"></td>
				<td>Number of records that the table can display in the current draw. It is expected that the number of records returned will be equal to this number, unless the server has fewer records to return. Note that this can be -1 to indicate that all records should be returned (although that negates any benefits of server-side processing!)</td>
			</tr>
			<tr>
				<td style="white-space: nowrap;">Sort Column</td>
				<td>
					<select value="{{sortColumn}}">
						<option value="">-</option>
						<option value="name">Fruit</option>
						<option value="energy">Energy (kcal)</option>
						<option value="protein">Protein (g)</option>
						<option value="fat">Fat, total (g)</option>
						<option value="carbohydrates">Carbohydrate (g)</option>
					</select>
				</td>
				<td><input type="checkbox" checked="{{sortDescending}}">Descending</td>
				<td>Column by which to sort the records.</td>
			</tr>
		</table>

		<indexeddb-fruit
			data="{{data}}"
			dataSize="{{dataSize}}"
			loading="{{loading}}"
			start="{{start}}"
			length="{{length}}"
			sortColumn="{{sortColumn}}"
			sortDescending="{{sortDescending}}"
			columns='[
				{"name":"name"},
				{"name":"energy"},
				{"name":"protein"},
				{"name":"fat"},
				{"name":"carbohydrates"}
			]'
		></indexeddb-fruit>

		<p>

		<strong>
			<template if="{{!loading}}">Waiting for Query<br></template>
			<template if="{{loading}}">Loading<br></template>
			{{dataSize}} Total Records<br>
			{{data.length}} Records Returned<br>
		</strong>

		<json-stringify
			data="{{data}}"
			style="overflow-y:auto;display:block;border:1px solid #333;"
		></json-stringify>
	</template>

</body>
</html>