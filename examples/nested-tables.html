<!DOCTYPE html>
<html>
  <head>
	<title>Sortable Table using Polymer Web Components</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<script src="platform.js"></script>
	<script src="polymer.js"></script>
	<link rel="import" href="../src/sortable-table.html">
	<style>
		sortable-table { width: 100% }
	</style>
  </head>
  <body unresolved>

	<h2>Nested Tables and Hierarchical JSON</h2>
	In lieu of built in groupby functionality, it should be possible to nest sortable tables into other sortable tables.<br/>
	The <code>columns</code> contains a nested <code>columns</code> property, and we can link all nested table's sort field by storing it
	in the nested <code>columns</code>.

	<p />

	<template id="example" bind>
	  <sortable-table data="{{data}}" columns="{{columns}}"></sortable-table>
	</template>

	<!-- template to print fruit icon in header -->
	<template id="fruitsTemplate">
	  <th style="{{sortColumn==column.name && sortDescending ? 'text-decoration:overline;' : ''}}
				  {{sortColumn==column.name && !sortDescending ? 'text-decoration:underline;' : ''}}">
		<template if="{{column.name=='apple'}}">
			<img alt="apple" style="vertical-align:middle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEGklEQVRYw+2XW2xUVRSGv73Pbc7MtNhpy5BeQLBFQ6mFEggSLhKFECLIK+HBB8QL+mCiT2o0mJgYCA/GIAnRFxMCEmnUmCjVaGIMIH2RomgEisAAghQovc2cy14+UBCw7UwxgZiwHs8+e6///Gut/99HiQh3MzR3Oe4B+P8C6OvrVsCk3zq+WwF4t3uOfbsb0+lKb9tra/b3X76cfmj24hqgcKdLkG94+JEOpTF3ogQayAC1wFSgEmBy09xt2nINcE1MxgGNQ+/5/7UEqqezc0bvwV+e6u3oWNZ/5NhEExbcuOeyZWeqBstnzzpYsWjBdj9d1gc0n9iy9aXur75elj9/ttx2/dirr7+YXjj/+5olj232H5iyb8QkIyihndu9+90TG955Pi4ESovGOBZE4c2bgQOTYjP/z3RUKAy6156LKNxxZXh1WXq6ctL01qvvjX9y5ctAVBKAKz/sf6Pz2Rc2xFGIpW1EKSSKrma8JYyK0aK5tmjCAPf+SSQqs2RXr+LCp18w8NMhmfHZx+v8yZM/LAVA9sDjy7vyJ3NJHAelNBIGoxdSBJQCEey6GnQYkZo7k+ZNmwD48YlVJNzEXy1tOxuBnlGb8EL7N02DJ3NJZdlY2iqeHLCSKTAKpRSO5xN0d1O3dt319embN9Jz6NfqS3v3NRWdgoEjx2qtZBIRwQRBSSMSDfSjfA8TwWBXF1II6G5vv6FOBiMx/T8fnlgUgLi2JfkA23UpxagVCiuRgDBC+y4KjXYczmz9gDiOATj8+ptopTFBWFV0DP1xmfMmDokHI2zfxxQKN4z5cPxbEBvERGCARAJVCMHEfFtVjzu+Akt5CIKyrb6iDJQtnJOzPA+tFSY/iE4mRqs+EseYG8cznwfHQiLwxlejsDESowA7W322KAB/Qu3RiubpZ2Sos83A4L9pVwptu4iYYdkxQYCdcFDyz9zaflKqli49XooUD1Q9t/YjpdTIuux6gKCUjNAXEEcheC5oC0Qob5mec1LJkyV5Qaa56X2vKtM3/Ok2cRDcTPtI8hAUsBwHLIe69U9vB/IlAXAymVzNmtW7GOpihojWtovEIUjpBhiHIX5tdsBvaNg6FjeU+vXPvHLf/HlHMQaFwk76SBShtCo5uSh91UaXLfncq64+NRYzutrQfxxf0LnuxS8LZ86nlDEYE43B6C0s28ZvnHK6tW3nLODcmAEASBzN61i6si2fO529rvnD+cBNp1pYnotO2EHrJztXevV1e277QqIse+/Mth0tUze+vSXd2NDjpJIoDSKCk/Il8+iiE5ZjI8aAyJASWqSnPZhr2bVj8WjJS2LgligHKq4c6qyMui8m062t59zy8lO9vx+bdnFP+xwJw5Rdlr7kTZhwunrF8r1Ab9EPvPdrdg/A3QbwN3RVn5GHaM5pAAAAAElFTkSuQmCC" />
		</template>
		<template if="{{column.name=='banana'}}">
			<img alt="banana" style="vertical-align:middle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAD8klEQVRYw+2XW2xUVRiFv73POTPt9EYdeqEtYClFkHjBxEs0iGIgKMYYDMbESyJ9AJ/UBCVNhBJMNPigxnhLn4pAjGB80Bgj3h40IRIaAWNxSmlKK6UF67RzpnM9Z/8+lGmphXohYx9gJ+flXLLW/v/9r7WOEhFmcmlmeF2RBBRQPmME3OTZirYfNh4WY66fEQKDsZOP9A4eqY9nRhwAROT/vAp3fb+p++CJvbtz9+x871ggIOlPnsU70KRVvDDm9sy+8badzRMv5HnXfmr/Nj9aL/4f9eINLRDj3po1ft+9uecqr0LkHX3cxB/bg6QRJWhCiCTAWdWhi1uXAZl8HsJaf/SF15EUImoCHIBsYKw7+ZuCQpN4aY8ykUpBY1k5cDUGr1YcBrJ5I2D89udJ710haCxdhDHxCXDPEW2v+ShvQiTeyVUS27BDMEoTwhh3HNz3hc7OmgFtl3yTLwJLTWLzLsS1tCpGmCi7tiES8Zm/eOv7llXkTiIgMNt42cqUEIL/rA3z/Pi6z7T/8xxllSGSHAdXCn45agiE7uwqDd/32iQz8jLpRXu2P3n0nece6LWHV/b68WcOQ/quf9n1W/yRtQfxfqqHIMjweHG1hshxi2zGoXZRy4tA6sIvrQbVExHpqHq6ud+2VDSkzIlqyex/SrwjK1RgbRfQNw1ysZ/5eCtuUyvmVFirIEIaUCgUOuDQddwQH/WoW/LyW7PCK9+YYo1f797Yvfz+r+ptbXIThCKDkAVVCvYdx9ANXyp72Y/KvnlATEzwu+biH1opfsdqvEPXChZaBSeNmtaKzk6Iu0J4zvrv5i/Z+SCQmEJg+OyBVyLtm5oXLxVKSmyMpFBTjoF/XjcKAQOSHmssFoLC0qHxUVMKsh50HBMMQln4nvaGm9qWA8mLhgMRCfZFtn06dGbf6qLSFAsXaKZXZyenZghmTOEuaGt81ND5K2glVNRt+HbudS0PA+4l08l5Lyg43fnqBwN9760PBB3qag3lFQqTvVSkcRBlofARyaIU+Ebo7oJYTLAsm5qG5ner5jVtAeLTxqMLzEj/fmZfy0D3m5sTo7+FiossqmsUpWWCbWvEjA2sCKA0qEK0ShN300SjFv19ghMwhEpvOFW3cOuO4vLb28b69Tf57CJu2NjTseXt2LnP7/b8ZIHvQTDkURkWnAIL24ZspoBEMsm5AQetLdCeBOyKaHVjc1u46qHt05X8nxAA0OlE77x0pv+J6OkPH3WH2xuymbMhQwaFjYiP1g4FwTq3tGJNe7h2XavjlH9h2eGRnMtdLoG/Judr0qnBakkOFWX8/qBtlSWDxY2u5cwaBKKXFZGv/hldJXDFE/gTOHhqyah2ftUAAAAASUVORK5CYII=" />
		</template>
		<template if="{{column.name=='grape'}}">
			<img alt="grape" style="vertical-align:middle" src="data:image/png;base64,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" />
		</template>
		<template if="{{column.name=='pear'}}">
			<img alt="pear" style="vertical-align:middle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH3gIMFDMjmdUkyQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAEUUlEQVRYw8WXS2xUVRjHf+fce+fZTqfM9AFDGyAFkYdEQEuQaGLUqLgRBBMjYkw0YGJiDCbqwrARY6IsjDEu0AURDfHBAoxR6wIiEqGK5WGBtkgrzLQzfcyTmblz7z0uaAWEWodO4azv/b7f9/if7ztCKcWtPPpkDdglsz6ZON8odXeqtj7SW+7/crIAp460bfnkjSc7ot3HN93I/5MGiMxb2unxB1i48uE9twQgGG5sm7Ww9RzQfisAwp3ptidEk+6cGPrmeSBYrgExCRVEdp94+efzmd+alZAIB2ZPa+1eM/+dlUBiyjNwoPfD9/tSR5pBogkDRzj0jPzU8sv5T9+8GSW4r6N/7xqvUYMhdYI+H3e3LMRteDmW2PsC0DKlAN92vbW5YKcxnQJSGYQCQXxuD61zFpDInnO1x77cOJUA/li2835delHKpKjypLMXQSh0l44UOt3DBx6ZspuwYOYfy1nJOqUsQAMUsVQ/uZ4CuUIGQ9NJFqLzgQZgoNIZkIeiOzYVrQyKy+qRQpLNp5FCAyBnDvnT+YG1FS+BZeXDfyS+Xy7GmwuOBYCjShyO7Vr/f+yXBfBnuv2ugp31T2hUSLqGDy0BAhUFiGdPb0Y5YqLvFKAoBmKZzlUVA0gX4g+0x75YPbFzhVv6yReH5eHoru2AtyIA+/s+2OooGyH+OwE+I0DRzoDUODO4f+7vA1+9OGmAWObUK2eGDtzjqBJSuMeBUHiNWgpmGjGqBiklHf37XgPqbxig5BTC+7q2vq5wRjs9j5QuhJBXpd2lVWFZKZoaZjCnMcKMUB2WYxPPdYe/63l75+ilUT7AX8mjr6aL/WHBWNQC2y4gpYEQoNSlmocDbu5dvJxZddOZGWpg7vRmVi9bRcBXRWfix4cSue61NwLgP3jh42fHor9iio9CeKhyh6j2a7REZlOyrctZUYq8WWTFbYvJmzmxv++jbYCrXIBgqjgQuhw9VzlA2RSsLDX+IIyzV9i2Q6g6SDzT1QyEygVw2ZapXa1wkFIj7J6HZZvYjkkyl0XXtOvLUilGLmZwhCXg2kgmAkj5XMEsgCF9eLRaUBpVsoESeZCXShNPDnKu/wJCCKS4lC8pBLbjcLy3G11Kaj0zk0C63Gk43Bp5es8PZ9/bIJWOJtzUeyOMmL2UrBRitLF1TeNsPEpPPErIHyBQXUViZIRsMY8AhDBY1rj2ayBb9k5oq1Lzjl+fOqZJrSaVH8RteDDtHNc25hVFUuqfu0Iph5C/aeiZO3Yu0oTeX7YMNWH0Pb5o23MeGcz4jVqKdmpc54wWecy5o2ymeZtHNi7atf56zsvdipfuPvHSZ9HsyXmOssR1+ulfE1F3ZgaWnFy3YPsGoKNSa7k7XRx49HD08y2nB9tW5K20HJOfAoSQePUa+/a6Bw8un77u3YC78TvAnIp3gQAivcmjTUPFszNKVt5j6N6Ldb45A03Vd/YCF27Gw6Qi528YLNMa8NbmHQAAAABJRU5ErkJggg==" />
		</template>
		<template if="{{column.name=='strawberry'}}">
			<img alt="strawberry" style="vertical-align:middle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAC4jAAAuIwF4pT92AAAFxElEQVRYw+WXf2xV9RXAP9/7vfe99vW1pS28xyP8aBdKK5bCsCAYtjiRMWKiZFsEt5hNHRsTM2NMJsmmGw7d4hbHBKO46EyWjVhUMMG5dWxaKyAZOIRiSsDCQNtX1vr64/X9uvd+z/54pZYfw9LO+MdO8s29+d57vudzz/d8zz1HiQifpVh8xjJqgOPdp5f2pQedy7yiPk2A8u+89Nj2033xlZd4NuHFI2882dz+7s2fGsCZ/u45//ygrez7rzz+BFA+4tGkVX946PVvN268+1SiY+YlVPUneWZUAHvaD1WmfI/ORNfkna3N3zqne8f2n2/bebRlnkKBEBihUrv+tae33PL8Ayda4ydnjxvgcPz98uunzyFkF/HsgV33AaHWzvZ7drS+udTRNgCCCKBfbdv3wKxf3nZo01uN61pOHZ4hyPTLrW2PBuCaWLV6dt+rpCVDe++H0/afPvqLVdt+cpdrXBQKASrLJpfd0fjI69sPv/EFFNiWRjs2IPa4Af71UZcMShoRSIU0t/92/brKeL+1OOljG+gOKTZuffi+v5UlnaBW2Cav57keRiQ7VoDSjHGn/fXY/liPO1Dr+R43n3L53jtJImnXStkaoxV+Lou2gzjS69gubJ8d5sWrQrSXaCYECjJzYzNPA1NzXrYwYAe7gV5gOPupCzKh0znQs2Lr2zvv/iDRde2f2w5M6HUHiAx6NL3QRUf4/DRgBgeJrVtL1/O/P2++0DNsaZjA7vqKXG2ksufY2VPRtJu1qsqn9G9b/dMbqyPT/vHfPGA1vrt7zY4jLcuz2QxJP0Vln8vv/p4aNq7cNMoJYYY+Qln5q1gaCxDjk7ZgzcEElX25wGMLkzEt+Ti5d8mtjdWRae9c7hRk712y6ms/vP6b98+YFDsp4rOlKUHGeFihAsT3mfXMVtzenrxyOEzHU88hvo+2NOJ7gFBy3ULC8+pZejJDJAWi4AeLV750+/zl9wD+eenzMj8jO37o4NMnbr3zLl+BFjCOQ+k19fQ270UVBPPbIBD9+lfp37uXbGccgEB0Iibn4ycSHJ1SZNi8YdPaumX3X2kQev07/3S1QVAojALJZUkeOjJsHK0J2A6Jt1pQqfSwYq6re/h+XiZoFtUt+81YElHRYOvRapSiuOHzmIEBlGVhXA8nVAhKY1kaL5PGi5/FHUh+rCmSH4D3UY/dd/zE1LEAaMm4GqB08ULcRCLvcmPwMy6qwMbkcqBUfoyQYOVUgrHo0BYZVKIvOBYAo2xLEKHz109iV83IB43SoBWf2/AjlDFcKoIcO4CxdN6ApaG0ODsWgFRhVVUHgG/baF8QpdGOxuRynHn0cYylCBSFLioHkifacT/syBsIhU1Jzaz4mDxQdt2ifefcqywbbWv8bBaUItfbi1IKL5XGsi1KGuoR1x1iGYIxUDx3dhcwJgCK5897wXIcg6UhYCO57EX7LSIgFlMe+jFeoncYIFhehlUUYuJNX3kNSI0JwA4XHXAi0YSlNYUlxbiWfxEAgPE9jt+yGjsyKT/h+9iTKxDX9Yvr6p4bcz0QiEb7Yret3OWnU2T6+rBFDx+vC8UXHwWIAV0YInn4GEW1M9vDtTUHx1OQyPQ1azaEqioHTTb3caCJUFg1A4x/oSuoWP5FvHQaVRCk9tGfbQIy462ITkZX3rTZyAhjvk/su3ciWXfEnEGFCql5ZCPiuURuvOHtUE31U5+0uBplY1LStv7BN8/ueGXuOS8oSyFGQIG4eeNkMyjHITixIreguekGBXv+V2V5f+3DD64OX10XFy/vCTGC5HKULGjAKQlDNp9rVEHQm7118zdGY/zKOqNAoG3+y39cVrao4X0Zyn8ymKFsxZfx02lACEYjA9c27Vobrq15edTrisiVDd9U/Ltp96/2f2lFsmXOQmmeVS97Fixx25/Y8hcRuepK11PjaE4rku+9N90fTNmlCxq6gDMja73Rivq/747/A82gwH2IObc6AAAAAElFTkSuQmCC" />
		</template>
		{{column.name}}
	  </th>
	</template>

	<!-- template to convert int to day of week -->
	<template id="dayTable">
	  <td style="width:100px">
		<template if="{{value==1}}">Monday</template>
		<template if="{{value==2}}">Tuesday</template>
		<template if="{{value==3}}">Wednesday</template>
		<template if="{{value==4}}">Wednesday</template>
		<template if="{{value==5}}">Friday</template>
		<template if="{{value==6}}">Saturday</template>
		<template if="{{value==7}}">Sunday</template>
	  </td>
	</template>

	<!-- nested table as a cell -->
	<template id="nestedTable">
	  <td style="padding:0;">
		<sortable-table data="{{row[column.name]}}" columns="{{column.columns}}" sortColumn="{{column.sortColumn}}" sortDescending="{{column.sortDescending}}"></sortable-table>
	  </td>
	</template>

	<!-- nested table as a footer -->
	<template id="nestedFooterTable">
	  <td style="padding:0;">
		<sortable-table data="{{rowValues | cube}}" columns="{{column.columns}}" sortColumn="{{column.sortColumn}}" sortDescending="{{column.sortDescending}}"></sortable-table>
	  </td>
	</template>

	<!-- text template for footer -->
	<template id="totalTemplate">
	  <td class="ssDatatableHeader">
		Week
	  </td>
	</template>

	<!-- sum template for footer -->
	<template id="sumTemplate">
	  <td class="ssDatatableHeader" style="text-align:right;">
		{{values | sum}}
	  </td>
	</template>

	<script>
	  /* Group by day, for totals */
	  PolymerExpressions.prototype.cube = function(arr) {
		var c = []
		for(var i=0;i<arr.length;i++){
		  //d should be an array of unique days
		  var d = arr[i];
		  for(var j=0;j<d.length;j++){
			//find day record in c
			var s = null;
			for(var k=0;k<c.length;k++){
			  if(c[k].day==d[j].day){
				s = c[k];
				break;
			  }
			}
			if(!s){
			  s = { day: d[j].day };
			  c.push(s);
			}
			//loop through properties and add them to s
			//makes assumption that properties are the same, none missing
			var o = d[j];
			for (var key in o) {
			  if (o.hasOwnProperty(key) && key!='day') {
				s[key] = (s[key] || 0) + o[key];
			  }
			}
		  }
		}
		return c;
	  };

	  var fruits = [
		{
		  worker: 'alice',
		  unitsSold : [
			{ day: 1, apple: 1, pear: 1, strawberry: 2, grape: 4, banana: 2 }, 
			{ day: 2, apple: 8, pear: 5, strawberry: 2, grape: 5, banana: 1 }, 
			{ day: 3, apple: 1, pear: 0, strawberry: 0, grape: 2, banana: 3 },
			{ day: 4, apple: 6, pear: 3, strawberry: 0, grape: 3, banana: 3 },
			{ day: 5, apple: 0, pear: 0, strawberry: 8, grape: 0, banana: 6 }
		  ]
		},{
		  worker: 'bill',
		  unitsSold : [
			{ day: 1, apple: 4, pear: 3, strawberry: 4, grape: 1, banana: 3 },
			{ day: 2, apple: 7, pear: 2, strawberry: 9, grape: 3, banana: 2 },
			{ day: 3, apple: 0, pear: 3, strawberry: 0, grape: 4, banana: 2 },
			{ day: 4, apple: 1, pear: 2, strawberry: 8, grape: 1, banana: 1 },
			{ day: 5, apple: 2, pear: 4, strawberry: 7, grape: 1, banana: 9 }
		  ]
		},{
		  worker: 'casey',
		  unitsSold : [
			{ day: 1, apple: 8, pear: 2, strawberry: 5, grape: 3, banana: 7 },
			{ day: 2, apple: 1, pear: 4, strawberry: 3, grape: 9, banana: 4 },
			{ day: 3, apple: 2, pear: 6, strawberry: 0, grape: 0, banana: 3 },
			{ day: 4, apple: 4, pear: 2, strawberry: 7, grape: 7, banana: 3 },
			{ day: 5, apple: 2, pear: 3, strawberry: 4, grape: 2, banana: 1 }
		  ]
		}
	  ];

	  var columns = [
		{
		  name: 'worker',
		  title: 'Worker'
		},{
		  name:'unitsSold',
		  title:'Total Units Sold This Week',
		  cellTemplate: 'nestedTable',
		  columns: [
			{ name:'day', title:'Day', cellTemplate:'dayTable', footerTemplate: 'totalTemplate'},
			{ name:'apple', headerTemplate: 'fruitsTemplate', footerTemplate: 'sumTemplate' },
			{ name:'banana', headerTemplate: 'fruitsTemplate', footerTemplate: 'sumTemplate' },
			{ name:'grape', headerTemplate: 'fruitsTemplate', footerTemplate: 'sumTemplate' },
			{ name:'pear', headerTemplate: 'fruitsTemplate', footerTemplate: 'sumTemplate' },
			{ name:'strawberry', headerTemplate: 'fruitsTemplate', footerTemplate: 'sumTemplate' },
			{ name:'total', title: 'Total', formula: function(row){ return row.apple + row.pear + row.strawberry + row.grape + row.banana }, footerTemplate: 'sumTemplate' }
		  ],
		  formula: function(row){
			var s = 0;
			//sum over all the worker's sales
			for(var i=0;i<row.unitsSold.length;i++){
			  var r = row.unitsSold[i];
			  s += (r.apple + r.pear + r.strawberry + r.grape + r.banana);
			}
			return s;
		  },
		  footerTemplate: 'nestedFooterTable'
		}
	  ];

	  window.addEventListener('polymer-ready', function(){
		var model = {
		  data: fruits,
		  columns: columns
		};
		document.getElementById('example').model = model;
	  });
	</script>

  </body>
</html>